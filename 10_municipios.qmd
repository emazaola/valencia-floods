---
title: "Municipios"
author: "Gisarte"
format: html
editor: source
---

## Municipios

Obtención de límites municipales de España a partir de [MapSpain](https://ropenspain.github.io/mapSpain/)

### Installation


# Install mapSpain in R:
install.packages("mapSpain",
  repos = c(
    "https://ropenspain.r-universe.dev",
    "https://cloud.r-project.org"
  ),
  dependencies = TRUE
)


```{r}
library(mapSpain)
library(sf)
library(tidyverse)

library(reactable)
```

## Seleccionar Municipio


```{r aoi_name_20}
aoi_name <- c("Valencia")
```

```{r}
# Get munics
Base <- esp_get_munic(year = "2019", 
                      region = "Valencia")
```

```{r}
reactable(Base,
  searchable = TRUE, striped = TRUE, filterable = TRUE, height = 350#,   elementId = "munis-galicia"
)
```

```{r}
herriak <- c("Massanassa", "Albal", "Paiporta", "Picanya", "Sedaví", "Benetússer", "Beniparrell", "Catarroja","Silla",
"Alfafar")
```


```{r}
# Get munics
aoi <- Base |> 
  filter(name %in% herriak) |> 
  select(c("name", "geometry"))
```

```{r}
plot(aoi)

```



### Guardar aoi

```{r, guardar_aoi-gpkg}
st_write(aoi,
         #paste0("../../proceso/")
         paste0("../../process/geoprocess/",aoi_name, ".gpkg"),
         append = FALSE)

```

